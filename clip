#!/usr/bin/python3
from sys import stderr, exit, argv as args

try:
    import clipboard
except ImportError:
    print("ERROR: please, install the \"clipboard\" library to continue.")
    exit(1)

if '-h' in args or '--help' in args:
    print('''
Usage: clip [-h] [paste|copy]

A ultility for copy and paste using the terminal.

-h, --help      Show this message and exit
v, paste        Show the text from clipboard
c, copy         Copy the text from pipe ("|")
                to clipboard (is the default).

Example:

echo "this text will be copied."| clip
echo $(clip paste)
'''.strip())
    exit(0)

for arg in args[1:]:
    if arg not in ['v', 'paste', 'c', 'copy']:
        print('Usage: clip [-h] [paste|copy]')
        print('Clip: the "{}" arg is not valid!', file=stderr)
        exit(1)

if 'paste' in args or 'p' in args:
       print("\nafter this doed, run this script again.")

    print(clipboard.paste().strip(), end='')
else:
    def read():
        from sys import stdin
        return stdin.read()

    if len(args)>2:
       clipboard.copy(' '.join(args[2:]))
       print("the text \"{}\" was copied!".format(' '.join(args[2:])))
    else:
       clipboard.copy(read())
       print("the text was copied")
